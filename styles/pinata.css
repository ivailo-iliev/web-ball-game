/* Pinata game styles */
.game.pinata {
  --cactus-svg:url("data:image/svg+xml;utf8,\
<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'>\
<text x='50%' y='50%' dominant-baseline='central' text-anchor='middle' font-size='90'>ğŸŒµ</text>\
</svg>");

  --donkey-svg:url("data:image/svg+xml;utf8,\
<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'>\
<text x='50%' y='50%' dominant-baseline='central' text-anchor='middle' font-size='90'>ğŸ«</text>\
</svg>");

  --br:#e04b40;  /* red   */
  --by:#f7d678;  /* yellow*/
  --bg:#4ba66f;  /* green */
  --bb:#3f7bc4;  /* blue  */
  --rope:#666;   /* cloth cord / banner edge */
  --depth:400px; /* change to 200-1200 to feel the perspective   */


  /* layers painted FRONT â†’ BACK -------------------------------------- */
  background:

    /* ğŸŒµ cactus (left) */
    var(--cactus-svg)  3% 68% /15vw auto no-repeat,

    /* ğŸ« donkey (right) */
    var(--donkey-svg) 92% 68% /15vw auto no-repeat,

    /* bunting banner drawn via pseudo-elements */

    /* plain sand ground (no dots) -------------------------------------- */
    linear-gradient(#e8c78d 0%, #deba7e 100%) 0 100% / 100% 32vh no-repeat,

    /* radial-glow sun --------------------------------------------------- */
    radial-gradient(circle at 12% 15%,
        #fff7c2 0%, #ffe58f 25%, rgba(255,229,143,.4) 45%, rgba(255,229,143,0) 65%)
        0 0 / 100% 100% no-repeat,

    /* warm sunset sky --------------------------------------------------- */
    linear-gradient(#ffbd80 0%, #ffcfa0 40%, #ffe9d1 100%);

  transform:translateZ(0);
  perspective-origin:50% 0;
}

/* â”€â”€â”€ BUNTING banner (3D) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */

.game.pinata::before,
.game.pinata::after {
  content:"";
  position:absolute;
  top:0;
  width:60vw;
  height:8vh;

  /* 3 stacked backgrounds: rim shadow, subtle highlight, colour tiles */
  background:
      linear-gradient(to bottom,
        transparent 60%,rgba(0,0,0,.25) 100%),                           /* shadow */
      radial-gradient(ellipse at center 80%,
        rgba(255,255,255,.4) 0%,transparent 60%),                        /* highlight */
      repeating-linear-gradient(to right,                               /* colour tiles */
        var(--br)  0  8vw, transparent  8vw 10vw,
        var(--by) 10vw 18vw, transparent 18vw 20vw,
        var(--bg) 20vw 28vw, transparent 28vw 30vw,
        var(--bb) 30vw 38vw, transparent 38vw 40vw);

  background-blend-mode:soft-light,normal,normal;
  border-top:
  1px solid var(--rope);                /* rope now runs along the top edge */
  border-bottom-left-radius:45% 100%;
  border-bottom-right-radius:45% 100%;

  pointer-events:none;
  z-index:2;

  transform-style:preserve-3d;                     /* keep depth in descendants */
  animation:sway 7s ease-in-out infinite;
}

/* â–² left half â€“ outer edge LOWER than centre */
.game.pinata::before{
  right:50%;
  transform-origin:top right;
  transform:
    perspective(var(--depth))
    translateX(1px)            /* hide 1-px join gap              */
    rotateY(25deg)             /* depth tilt                      */
    rotateX(-5deg)             /* pitch down a little             */
    rotateZ(-8deg);            /* slopes down toward the centre   */
  animation-name:swing-L;
}

/* â–² right half â€“ mirror of the left */
.game.pinata::after{
  left:50%;
  transform-origin:top left;
  transform:
    perspective(var(--depth))
    rotateY(-25deg)
    rotateX(-5deg)
    rotateZ( 8deg);
  animation-name:swing-R;
}

/* gentle breeze: only Z-axis rocks so depth & pitch stay constant */
@keyframes swing-L{
  0%,100%{transform:perspective(var(--depth)) translateX(1px) rotateY(25deg) rotateX(-5deg) rotateZ(-8deg);}
  50%   {transform:perspective(var(--depth)) translateX(1px) rotateY(25deg) rotateX(-5deg) rotateZ(-10deg);}
}
@keyframes swing-R{
  0%,100%{transform:perspective(var(--depth)) rotateY(-25deg) rotateX(-5deg) rotateZ( 8deg);}
  50%   {transform:perspective(var(--depth)) rotateY(-25deg) rotateX(-5deg) rotateZ(10deg);}
}

@media (prefers-reduced-motion: reduce) {
  .game.pinata::before,
  .game.pinata::after { animation: none; }
}

.game.pinata .sprite.pinata {
  transform-origin: 50% calc(var(--size)/2 - var(--string));
}

.game.pinata .sprite.pinata::before {
  content: "";
  position: absolute;
  top: calc(-1*var(--string) + var(--size)/2);
  left: 50%;
  width: 2px;
  height: var(--string);
  background: #333;
  z-index: -1;
}
